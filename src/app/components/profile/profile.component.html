<!-- profile.component.html -->

<div class="container mt-5" *ngIf="userProfile; else loading">
  <div class="card profile-container mx-auto p-4 shadow" style="max-width: 400px;">
    <h2 class="text-center text-primary mb-3">User Profile</h2>

    <img
      *ngIf="userProfile.profilePhoto; else defaultPhoto"
      [src]="userProfile.profilePhoto"
      alt="Profile Photo"
      class="profile-pic mb-3"
      width="150"
      height="150"
    />
    <ng-template #defaultPhoto>
      <img src="https://via.placeholder.com/150" alt="Default Profile Photo" class="profile-pic mb-3" />
    </ng-template>

    <p><strong>Name:</strong> {{ userProfile.name }}</p>
    <p><strong>Email:</strong> {{ userProfile.email }}</p>
    <p><strong>Role:</strong> {{ userProfile.role }}</p>
    <p><strong>Subscription Plan:</strong> {{ userProfile.subscription}}</p>

    <form (submit)="uploadPhoto($event)" class="mt-3">
      <input type="file" (change)="onFileSelected($event)" accept="image/*" />
      <button type="submit" [disabled]="uploading">Upload Profile Photo</button>
    </form>
    <div *ngIf="uploadError" class="text-danger mt-2">{{ uploadError }}</div>
  </div>
</div>

<ng-template #loading>
  <div class="text-center mt-4">
    <div class="spinner-border text-primary" role="status"></div>
    <p class="mt-2">Loading user profile...</p>
  </div>
</ng-template>

