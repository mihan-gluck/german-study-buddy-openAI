<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Launching AI Agent</title>
    <meta charset="UTF-8" />
  </head>
  <body>
    <script>
      const queryParams = new URLSearchParams(window.location.search);
      const assistant = queryParams.get('assistant');
      const apiKey = queryParams.get('key');

      const config = {
        position: "bottom-right",
        offset: "40px",
        width: "50px",
        height: "50px",
        idle: {
          color: "#0447dd",
          type: "pill",
          title: "Have a quick question?",
          subtitle: "Talk with our AI assistant",
          icon: "https://unpkg.com/lucide-static@0.321.0/icons/phone.svg",
        },
        loading: {
          color: "#0447dd",
          type: "pill",
          title: "Connecting...",
          subtitle: "Please wait",
          icon: "https://unpkg.com/lucide-static@0.321.0/icons/loader-2.svg",
        },
        active: {
          color: "rgb(255, 0, 0)",
          type: "pill",
          title: "Call is in progress...",
          subtitle: "End the call.",
          icon: "https://unpkg.com/lucide-static@0.321.0/icons/phone-off.svg",
        },
      };

      const g = document.createElement("script");
      g.src = "https://cdn.jsdelivr.net/gh/VapiAI/html-script-tag@latest/dist/assets/index.js";
      g.defer = true;
      g.async = true;
      document.body.appendChild(g);

      g.onload = function () {
        try {
          window.vapiSDK.run({
            apiKey: apiKey,
            assistant: assistant,
            config: config,
          });
        } catch (error) {
          console.error("VAPI Widget Initialization Error:", error);
        }
      };
    </script>
  </body>
</html>
